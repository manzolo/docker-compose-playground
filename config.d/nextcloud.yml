images:
  nextcloud:
    category: storage
    description: Nextcloud - Self-hosted Cloud Storage & File Sharing
    image: nextcloud:latest
    keep_alive_cmd: apache2-foreground
    shell: /bin/bash
    environment:
      NEXTCLOUD_ADMIN_USER: "admin"
      NEXTCLOUD_ADMIN_PASSWORD: "admin123"
      NEXTCLOUD_TRUSTED_DOMAINS: "localhost 127.0.0.1"
      OVERWRITEPROTOCOL: "http"
    ports:
      - "8888:80"   # Web UI
    volumes:
      - type: named
        name: nextcloud_data
        path: /var/www/html
      - type: named
        name: nextcloud_uploads
        path: /var/www/html/data

    motd: |
      â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
      â•‘    Nextcloud - Self-hosted Cloud Storage & File Sharing     â•‘
      â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      ğŸŒ  Web Interface: http://localhost:8888
        Port: 8888

      ğŸ”  Admin Credentials:
        Username: admin
        Password: admin123

      ğŸ“  Important Directories:
        /var/www/html          # Nextcloud installation
        /var/www/html/data     # User files & data
        /var/www/html/config   # Configuration files

      ğŸ“Š  Quick Commands:
        # Check Nextcloud version:
        php occ --version
        
        # List users:
        php occ user:list
        
        # Add new user:
        php occ user:add username
        
        # Set user quota:
        php occ user:modify username --quota=10GB
        
        # Scan files:
        php occ files:scan --all
        
        # Enable 2FA:
        php occ twofactorauth:enable username totp

      ğŸ¯  Features:
        â€¢ File sync & sharing
        â€¢ Calendar & Contacts
        â€¢ Notes & Tasks
        â€¢ Collaborative editing
        â€¢ Video conferencing (Talk)
        â€¢ User management
        â€¢ Encryption
        â€¢ Versioning & trash bin

      ğŸ’¾  Persistence:
        â€¢ /var/www/html        # All Nextcloud files
        â€¢ /var/www/html/data   # User uploaded files
        Data persists across restarts

      ğŸ”Œ  Apps & Plugins:
        Available in: Admin â†’ Apps
        Popular apps:
         â€¢ Talk (Video conferencing)
         â€¢ Calendar
         â€¢ Contacts
         â€¢ Notes
         â€¢ Deck (Kanban boards)
         â€¢ News (RSS reader)

      ğŸ“  Users & Sharing:
        1. Create users: Admin â†’ Users
        2. Set permissions: Admin â†’ Users â†’ username
        3. Share files: Click file â†’ Share
        4. Public links: Share button â†’ Create link

      ğŸ”  Security:
        â€¢ Admin â†’ Settings â†’ Security
        â€¢ Enable brute force protection
        â€¢ Set password policy
        â€¢ Enable 2FA for admin
        â€¢ Configure SSL/TLS (production)

      ğŸš€  Next Steps:
        1. Change admin password immediately
        2. Configure backup strategy
        3. Enable SSL/TLS for production
        4. Set up external storage (optional)
        5. Install recommended apps
        6. Configure cron jobs for background tasks

      ğŸ“š  Documentation:
        https://docs.nextcloud.com/
