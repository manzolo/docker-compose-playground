# Python Development Stack
# Full development environment with VS Code Server (code-server) and Python 3.12
# Shared workspace volume for seamless development and debugging

# Group metadata
group:
  name: "Python-Dev-Stack"
  description: "Complete Python development environment with VS Code Server, Python 3.12, and debugging support"
  category: development
  containers:
    - code-server-python-stack
    - python-3.12-stack

# Container configurations
images:
  code-server-python-stack:
    category: development
    description: VS Code Server with Python development tools and debugger
    image: linuxserver/code-server
    keep_alive_cmd: sleep infinity
    shell: /bin/bash
    ports:
      - "8444:8443"
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=UTC
      - PASSWORD=pythondev
      - SUDO_PASSWORD=pythondev
      - DEFAULT_WORKSPACE=/workspace
    volumes:
      - host: shared-volumes/data/python-dev-workspace
        path: /workspace
        type: bind
      - host: shared-volumes/data/python-dev-config
        path: /config
        type: bind
    scripts:
      post_start: playground-code-server-python-stack-init.sh
    motd: |
      â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
      â•‘        VS Code Server - Python Development Edition          â•‘
      â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      ğŸ“‹ CONNECTION INFO
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      ğŸŒ Address:  http://localhost:8444
      ğŸ”‘ Password: pythondev

      âš™ï¸  FEATURES
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      âœ“ Python 3.12 full support with IntelliSense
      âœ“ Debugging configured (local + remote)
      âœ“ Extensions: Python, Pylance, debugpy
      âœ“ Launch configs for Django, Flask, FastAPI
      âœ“ Shared workspace with Python container
      âœ“ Auto-formatting with Black
      âœ“ Linting with Pylint

      ğŸ› DEBUGGING
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ Local: F5 â†’ "Python: Current File"
      â€¢ Remote: Connect to python-3.12-stack:5678
      â€¢ Set breakpoints by clicking line numbers
      â€¢ Use Debug Console for REPL

      ğŸ“ WORKSPACE & CONFIG
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ Workspace: ./shared-volumes/data/python-dev-workspace
      â€¢ Config: ./shared-volumes/data/python-dev-config
      â€¢ Shared workspace with: python-3.12-stack
      â€¢ Sample project included
      â€¢ Extensions in /config/extensions

      ğŸ’¡ QUICK COMMANDS
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ Ctrl+Shift+P: Command palette
      â€¢ F5: Start debugging
      â€¢ Ctrl+`: Toggle terminal
      â€¢ Shift+Alt+F: Format code

      ğŸš€ READY TO CODE!

  python-3.12-stack:
    category: programming
    description: Python 3.12 with debugging support (debugpy) and shared workspace
    image: python:3.12
    keep_alive_cmd: sleep infinity
    shell: /bin/bash
    ports:
      - "5678:5678"  # debugpy port
      - "8001:8000"  # FastAPI/Django dev server
      - "5010:5000"  # Flask dev server
    environment:
      - PYTHONUNBUFFERED=1
      - PYTHONDONTWRITEBYTECODE=1
    volumes:
      - host: shared-volumes/data/python-dev-workspace
        path: /workspace
        type: bind
    scripts:
      post_start: playground-python-3.12-stack-init.sh
      pre_stop: playground-python-3.12-stack-halt.sh
    motd: |
      â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
      â•‘           Python 3.12 - Development Container               â•‘
      â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      ğŸ PYTHON VERSION
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      Python 3.12 with debugpy and development tools

      ğŸ› DEBUGGING
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      Port: 5678 (debugpy remote debugging)

      Quick debug:
        debug-script /workspace/src/main.py

      Manual debug:
        python -m debugpy --listen 0.0.0.0:5678 --wait-for-client script.py

      ğŸŒ WEB DEVELOPMENT PORTS
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ 8001 â†’ FastAPI/Django (python manage.py runserver 0.0.0.0:8000)
      â€¢ 5010 â†’ Flask (flask run --host=0.0.0.0)

      ğŸ“ WORKSPACE
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ Container: /workspace
      â€¢ Host: ./shared-volumes/data/python-dev-workspace
      â€¢ Shared with Code Server
      â€¢ Changes sync in real-time

      ğŸ“¦ INSTALLED TOOLS
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      âœ“ debugpy (remote debugging)
      âœ“ ipython (enhanced REPL)
      âœ“ pytest (testing framework)
      âœ“ black (code formatter)
      âœ“ pylint (linter)
      âœ“ requests, pydantic, python-dotenv

      ğŸ’¡ QUICK START
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      # Run sample code
      python /workspace/src/main.py

      # Install project dependencies
      pip install -r /workspace/requirements.txt

      # Start debugging
      debug-script /workspace/src/main.py
      (Then connect from Code Server with F5)

      ğŸ”— NETWORK
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ Access other stack containers by name
      â€¢ Connect to databases, APIs, etc.
      â€¢ Container name: python-3.12-stack

      ğŸš€ READY FOR DEVELOPMENT!
