# PHP Development Stack
# Full development environment with VS Code Server (code-server) and PHP 8.4
# Shared workspace volume for seamless development and testing

# Group metadata
group:
  name: "PHP-Dev-Stack"
  description: "Complete PHP development environment with VS Code Server, PHP 8.4, and built-in server"
  category: development
  containers:
    - code-server-php-stack
    - php-8.4-stack

# Container configurations
images:
  code-server-php-stack:
    category: development
    description: VS Code Server with PHP development tools and debugger
    image: linuxserver/code-server
    keep_alive_cmd: sleep infinity
    shell: /bin/bash
    ports:
      - "8445:8443"
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=UTC
      - PASSWORD=phpdev
      - SUDO_PASSWORD=phpdev
      - DEFAULT_WORKSPACE=/workspace
    volumes:
      - host: shared-volumes/php-dev-workspace
        path: /workspace
        type: bind
      - host: shared-volumes/php-dev-config
        path: /config
        type: bind
    scripts:
      post_start: playground-code-server-php-stack-init.sh
    motd: |
      â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
      â•‘        VS Code Server - PHP Development Edition              â•‘
      â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      ğŸ“‹ CONNECTION INFO
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      ğŸŒ Address:  http://localhost:8445
      ğŸ”‘ Password: phpdev

      âš™ï¸  FEATURES
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      âœ“ PHP 8.4 full support with IntelliSense
      âœ“ Debugging configured (Xdebug)
      âœ“ Extensions: PHP Intelephense, PHP Debug
      âœ“ Shared workspace with PHP container
      âœ“ Auto-formatting with PHP CS Fixer
      âœ“ Linting with PHPStan

      ğŸ› DEBUGGING
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ Local: F5 â†’ "Listen for Xdebug"
      â€¢ Set breakpoints by clicking line numbers
      â€¢ Use Debug Console for expressions

      ğŸ“ WORKSPACE & CONFIG
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ Workspace: ./shared-volumes/php-dev-workspace
      â€¢ Config: ./shared-volumes/php-dev-config
      â€¢ Shared workspace with: php-8.4-stack
      â€¢ Sample project included
      â€¢ Extensions in /config/extensions

      ğŸ’¡ QUICK COMMANDS
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ Ctrl+Shift+P: Command palette
      â€¢ F5: Start debugging
      â€¢ Ctrl+`: Toggle terminal
      â€¢ Shift+Alt+F: Format code

      ğŸš€ READY TO CODE!

  php-8.4-stack:
    category: programming
    description: PHP 8.4 with built-in server and shared workspace
    image: php:8.4-cli
    keep_alive_cmd: sleep infinity
    shell: /bin/bash
    ports:
      - "9003:9003"  # Xdebug port
      - "8082:8000"  # Built-in PHP server
    environment:
      - PHP_INI_SCAN_DIR=/usr/local/etc/php/conf.d
      - XDEBUG_MODE=debug
    volumes:
      - host: shared-volumes/php-dev-workspace
        path: /workspace
        type: bind
    scripts:
      post_start: playground-php-8.4-stack-init.sh
      pre_stop: playground-php-8.4-stack-halt.sh
    motd: |
      â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
      â•‘              PHP 8.4 - Development Container                 â•‘
      â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      ğŸ˜ PHP VERSION
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      PHP 8.4 CLI with Xdebug and Composer

      ğŸ› DEBUGGING
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      Port: 9003 (Xdebug)

      Enable Xdebug:
        export XDEBUG_MODE=debug
        php -dxdebug.start_with_request=yes index.php

      ğŸŒ BUILT-IN SERVER
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      Start server:
        cd /workspace
        php -S 0.0.0.0:8000

      Access: http://localhost:8082

      Quick start:
        start-php-server

      ğŸ“ WORKSPACE
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ Container: /workspace
      â€¢ Host: ./shared-volumes/php-dev-workspace
      â€¢ Shared with Code Server
      â€¢ Changes sync in real-time

      ğŸ“¦ INSTALLED TOOLS
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      âœ“ PHP 8.4 CLI
      âœ“ Composer (dependency manager)
      âœ“ Xdebug (debugging)
      âœ“ Git (version control)

      ğŸ’¡ QUICK START
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      # Start built-in server
      start-php-server

      # Install dependencies
      composer install

      # Run PHP script
      php /workspace/index.php

      ğŸ”— NETWORK
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â€¢ Access other stack containers by name
      â€¢ Connect to databases, APIs, etc.
      â€¢ Container name: php-8.4-stack

      ğŸš€ READY FOR DEVELOPMENT!
