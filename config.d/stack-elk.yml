group:
  name: "ELK-Stack"
  description: "Elasticsearch, Logstash, Kibana - Log management and analytics"
  category: monitoring
  containers: 
    - elasticsearch-stack
    - kibana-stack

images:
  elasticsearch-stack:
    category: database
    description: Elasticsearch - Search & analytics engine
    image: docker.elastic.co/elasticsearch/elasticsearch:8.11.0
    keep_alive_cmd: /usr/local/bin/docker-entrypoint.sh
    shell: /bin/bash
    ports:
      - "9200:9200"
    environment:
      discovery.type: single-node
      xpack.security.enabled: "false"
      ES_JAVA_OPTS: -Xms512m -Xmx512m
    motd: |
      ╔══════════════════════════════════════════════════════════════╗
      ║                   Elasticsearch Stack                        ║
      ╚══════════════════════════════════════════════════════════════╝
      
      🔍 Search & Analytics Engine
      📊 Port: 9200
      
      🌐 Web Access:
         URL: http://localhost:9200
      
      📋 Quick Commands:
         # Check cluster health
         curl http://localhost:9200/_cluster/health
         
         # List indices
         curl http://localhost:9200/_cat/indices?v
         
         # Node info
         curl http://localhost:9200/_nodes/stats?pretty
      
      🔗 Connected Services:
         • Kibana: http://localhost:5601
      
      💡 Tips:
         - Security is disabled for development
         - Single-node cluster for testing

  kibana-stack:
    category: monitoring
    description: Kibana - Data visualization dashboard
    image: docker.elastic.co/kibana/kibana:8.11.0
    keep_alive_cmd: /usr/local/bin/kibana-docker
    shell: /bin/bash
    ports:
      - "5601:5601"
    environment:
      ELASTICSEARCH_HOSTS: http://elasticsearch-stack:9200
    depends_on:
      - elasticsearch-stack
    motd: |
      ╔══════════════════════════════════════════════════════════════╗
      ║                      Kibana Dashboard                        ║
      ╚══════════════════════════════════════════════════════════════╝
      
      📈 Data Visualization & Exploration
      🌐 Port: 5601
      
      🌐 Web Access:
         URL: http://localhost:5601
      
      🚀 Quick Start:
         1. Open http://localhost:5601
         2. Go to "Discover" to explore data
         3. Create "logs-*" index pattern
         4. Build dashboards in "Dashboard"
      
      📋 Features:
         • Discover: Search and filter logs
         • Dashboard: Create visualizations
         • Visualize: Build charts and graphs
         • Dev Tools: Run Elasticsearch queries
      
      🔗 Data Source:
         Connected to Elasticsearch: elasticsearch-stack:9200
      
      💡 Tips:
         - First setup may take 1-2 minutes
         - Use 'logs-*' pattern for Logstash data
         - Explore sample data in "Discover"